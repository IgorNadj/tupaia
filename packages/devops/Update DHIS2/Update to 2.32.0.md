Stop tomcat
```
sudo service tomcat stop
```

Clear coordinates from database (the column types are migrated in the latest dhis2, and it breaks
due to the way we stored them in reverse) and clear the oauth tables (which get out of sync)
```
sudo su postgres
psql dhis2
UPDATE organisationunit SET coordinates = '[[[[196.5983163,-18.0559727],[196.6010923,-18.0898338],[196.6097708,-18.1227504],[196.6242305,-18.1542814],[196.639007,-18.175698],[196.6462657,-18.1903575],[196.6672051,-18.2186549],[196.6929114,-18.2430123],[196.7226043,-18.2626904],[196.7553823,-18.2770919],[196.8099721,-18.2901152],[196.8461749,-18.2924034],[196.8822341,-18.2885417],[196.9061544,-18.2821071],[196.9174291,-18.278638],[196.949917,-18.2636088],[196.97921,-18.2433595],[197.0070277,-18.2186994],[197.0303652,-18.1941089],[197.0633587,-18.1466821],[197.0782514,-18.1149889],[197.088995,-18.0769744],[197.0928319,-18.0354388],[197.0893127,-18.0005504],[197.0827784,-17.974731],[197.0796244,-17.9670352],[197.0688796,-17.9419413],[197.0491989,-17.9120412],[197.024356,-17.8859726],[197.0137839,-17.8782247],[196.9919464,-17.853176],[196.9827818,-17.8446216],[196.9537295,-17.8229242],[196.9085825,-17.8017447],[196.8726292,-17.7928799],[196.833578,-17.7903681],[196.8006957,-17.7932265],[196.768704,-17.8011058],[196.7384194,-17.8138049],[196.7100803,-17.8313917],[196.6862225,-17.8518798],[196.6659155,-17.8756724],[196.6493802,-17.9027192],[196.6407207,-17.9236848],[196.6374549,-17.9315918],[196.6344577,-17.9439408],[196.6253444,-17.9584897],[196.6106205,-17.9893361],[196.6015233,-18.022147],[196.5983163,-18.0559727]],[[198.7557275,-10.4515889],[198.7607753,-10.4845394],[198.7713126,-10.5170086],[198.7860409,-10.5451724],[198.8051792,-10.570743],[198.8282493,-10.5930816],[198.854675,-10.6116303],[198.871077,-10.6194989],[198.9032902,-10.6392729],[198.9351494,-10.6521094],[198.9642186,-10.6590706],[198.9940241,-10.6619006],[199.0360076,-10.6594555],[199.0696657,-10.651315],[199.1024412,-10.6428811],[199.1327626,-10.6301442],[199.1639898,-10.611176],[199.1892686,-10.5905252],[199.210409,-10.5671847],[199.2328323,-10.5315686],[199.2466251,-10.4942062],[199.2524982,-10.4549472],[199.2520874,-10.4177658],[199.2434078,-10.3696013],[199.2299985,-10.336969],[199.2061827,-10.3009437],[199.1730072,-10.2691028],[199.1542984,-10.2439488],[199.1330673,-10.2229379],[199.0964617,-10.1975933],[199.0541898,-10.1799463],[198.8461873,-10.2288111],[198.8293375,-10.2447638],[198.8092872,-10.2725513],[198.7863841,-10.3109313],[198.7733759,-10.3397056],[198.7678439,-10.3572191],[198.7684138,-10.3584503],[198.7627376,-10.3798923],[198.7564217,-10.4182864],[198.7557275,-10.4515889]],[[201.7368673,-8.9748131],[201.7395603,-9.0111576],[201.7490473,-9.0464239],[201.765012,-9.0794373],[201.7759164,-9.0940862],[201.8006855,-9.1383502],[201.8258915,-9.1672854],[201.8593227,-9.192997],[201.8786659,-9.2178588],[201.9067291,-9.2428989],[201.9390842,-9.262522],[201.9746256,-9.2760579],[202.0088249,-9.2830048],[202.0427268,-9.2848485],[202.0609067,-9.2829618],[202.0975215,-9.2824434],[202.1295824,-9.2765649],[202.1602857,-9.2658854],[202.1902891,-9.2497652],[202.2251952,-9.2217854],[202.242801,-9.2019203],[202.2534649,-9.1860509],[202.2737642,-9.1650204],[202.2862971,-9.1484752],[202.3036726,-9.1196482],[202.3166053,-9.0865015],[202.3202634,-9.07254],[202.3252535,-9.0370073],[202.3235825,-9.0011856],[202.3153044,-8.9662304],[202.3002164,-8.9322057],[202.2731377,-8.8923936],[202.2622972,-8.861416],[202.2453815,-8.831338],[202.2233951,-8.8044931],[202.1921787,-8.777006],[202.1607274,-8.7575283],[202.1261597,-8.7438379],[202.0970243,-8.7378952],[202.0729063,-8.7282645],[202.0465355,-8.7213737],[202.00174,-8.7168792],[201.9652567,-8.720167],[201.9565264,-8.7193386],[201.9210183,-8.721901],[201.8849387,-8.7308318],[201.8515964,-8.7452851],[201.8214107,-8.7651849],[201.7930759,-8.7907658],[201.7704627,-8.8201111],[201.7537726,-8.8529494],[201.743566,-8.888178],[201.7401857,-8.9246142],[201.7413852,-8.9370627],[201.7391986,-8.9488562],[201.7368673,-8.9748131]],[[198.6891646,-10.0318232],[198.6900989,-10.0516557],[198.6937303,-10.0751809],[198.7046704,-10.1098375],[198.721632,-10.1415858],[198.7441803,-10.1699055],[198.7724783,-10.194535],[198.7995245,-10.2112314],[198.8289208,-10.2236817],[198.8461873,-10.2288111],[199.0541898,-10.1799463],[199.0608388,-10.1740888],[199.0849212,-10.1459316],[199.10329,-10.1140077],[199.1162986,-10.0790448],[199.1258945,-10.0463575],[199.1295955,-10.016816],[199.1283384,-9.9823626],[199.1209088,-9.9476766],[199.1073651,-9.9145293],[199.0983522,-9.8988403],[199.0727832,-9.8663397],[199.0447356,-9.8419105],[199.0306361,-9.8324302],[199.0110553,-9.8214731],[198.9954571,-9.8144203],[198.9744573,-9.8067918],[198.9494845,-9.8003357],[198.9215304,-9.7965786],[198.8878548,-9.7966977],[198.8589311,-9.8009581],[198.8310143,-9.809082],[198.7953304,-9.8259636],[198.7636503,-9.8491287],[198.7415104,-9.8718814],[198.7239605,-9.8965993],[198.7100586,-9.9245087],[198.6981243,-9.9669084],[198.6928299,-9.9944799],[198.6891646,-10.0318232]],[[193.9143532,-10.8881316],[193.9166908,-10.9244119],[193.9258001,-10.9596813],[193.9413791,-10.9927707],[193.9629114,-11.022583],[193.9896831,-11.0481298],[194.0208008,-11.0685605],[194.0277744,-11.0746404],[194.0577765,-11.0929086],[194.0912808,-11.1061693],[194.1430842,-11.1151317],[194.1823066,-11.1140389],[194.2171874,-11.1082082],[194.2430329,-11.1001196],[194.2872856,-11.077003],[194.3153853,-11.0540751],[194.3388323,-11.026699],[194.3554762,-10.9992465],[194.36694,-10.971055],[194.3739583,-10.9408484],[194.3761442,-10.9084386],[194.3717296,-10.8721031],[194.3736903,-10.8446448],[194.3703828,-10.8117571],[194.3615048,-10.7798468],[194.3469271,-10.749147],[194.3217716,-10.7148601],[194.2886632,-10.6856459],[194.2701113,-10.6737996],[194.2356249,-10.6581474],[194.19875,-10.6488761],[194.1607396,-10.646301],[194.1317862,-10.648632],[194.1058256,-10.6542349],[194.0814374,-10.6617152],[194.0490121,-10.676421],[194.0218789,-10.6941881],[193.997995,-10.7158754],[193.9755524,-10.7444043],[193.9663952,-10.7617543],[193.9479314,-10.7843041],[193.9302753,-10.8165855],[193.9190004,-10.8514328],[193.9143532,-10.8881316]],[[194.3721799,-11.558973],[194.3760505,-11.5974283],[194.3875172,-11.6344434],[194.4061506,-11.6686317],[194.4123443,-11.6773114],[194.4334714,-11.701669],[194.4593899,-11.7244383],[194.5033023,-11.7496237],[194.5318844,-11.759477],[194.56235,-11.7652642],[194.6024829,-11.7662392],[194.6426847,-11.7597195],[194.6820698,-11.7450837],[194.7235991,-11.7186106],[194.7533299,-11.6889273],[194.7683074,-11.6681527],[194.7864123,-11.6318927],[194.7949522,-11.6025518],[194.7987493,-11.5727156],[194.7980107,-11.5421343],[194.7927831,-11.5132867],[194.7832426,-11.4854882],[194.7725922,-11.4641182],[194.7579779,-11.4420186],[194.7347179,-11.4159663],[194.7131359,-11.3978873],[194.6986702,-11.3881746],[194.6658168,-11.3714879],[194.6366889,-11.3621366],[194.6051372,-11.356931],[194.570417,-11.3564679],[194.5361066,-11.3616258],[194.5134954,-11.368127],[194.4823956,-11.3813534],[194.4539597,-11.3993232],[194.443808,-11.4080865],[194.4438675,-11.4081506],[194.4253737,-11.4248077],[194.4030801,-11.4536542],[194.3861105,-11.486609],[194.3756924,-11.5220128],[194.3721799,-11.558973]],[[196.591812,-13.2743543],[196.5949346,-13.3075327],[196.6037258,-13.3397477],[196.6179407,-13.3701019],[196.6371834,-13.3977502],[196.6465406,-13.4083294],[196.6703208,-13.4312882],[196.6976401,-13.4502191],[196.7138506,-13.45858],[196.7319852,-13.4655183],[196.763353,-13.4937117],[196.7936466,-13.511562],[196.8266549,-13.5241438],[196.8614048,-13.5310864],[196.8980547,-13.5322988],[196.9333171,-13.5274716],[196.967198,-13.5168687],[196.9986915,-13.500805],[197.0271737,-13.4797578],[197.0670256,-13.4561452],[197.0934002,-13.4359719],[197.1160371,-13.4119328],[197.1390367,-13.376802],[197.1524549,-13.3434503],[197.1617965,-13.2994198],[197.162297,-13.26336],[197.1560732,-13.2278015],[197.1433283,-13.1939048],[197.1244782,-13.1627757],[197.1030577,-13.1376492],[197.0898061,-13.1238111],[197.0621612,-13.0983359],[197.0320336,-13.0773538],[197.0210918,-13.0648334],[196.9950512,-13.0432849],[196.9656806,-13.0261916],[196.9337885,-13.014024],[196.9002525,-13.0071169],[196.8659959,-13.0056606],[196.8319614,-13.0096951],[196.7996269,-13.0187941],[196.7698358,-13.0325155],[196.7392229,-13.0538512],[196.7319273,-13.0563304],[196.7020383,-13.0722371],[196.6752665,-13.0926775],[196.6523415,-13.1170944],[196.6338884,-13.1448221],[196.613858,-13.1816193],[196.601883,-13.2100374],[196.5943061,-13.2414396],[196.591812,-13.2743543]]]]' WHERE code = 'CK_Northern Islands';
UPDATE organisationunit SET coordinates = '[' || coordinates || ']' WHERE featuretype = 'POLYGON' AND coordinates IS NOT NULL AND coordinates NOT LIKE '[[[[%';
UPDATE organisationunit SET coordinates = regexp_replace(coordinates, '\[([-\d\.]*),([-\d\.]*)\]', E'[\\2,\\1]','g');
TRUNCATE TABLE oauth_access_token;
TRUNCATE TABLE oauth_refresh_token;
\q
exit
```

Install dhis2 2.32
```
sudo su
cd /home/tomcat/webapps
rm -rf *
exit
wget https://releases.dhis2.org/2.32/2.32.0/dhis.war
sudo cp dhis.war /home/tomcat/webapps/ROOT.war
rm dhis.war
sudo service tomcat start
```

Monitor output
```
sudo tail -f /home/tomcat/logs/catalina.out
```
